<% provide(:title, "Locations") %>
    </div>



<div  class="location-content--index ">
  <div class="map-container"  id="multi_markers" ></div>
</div>

<script type="text/javascript">

handler = Gmaps.build('Google');
handler.buildMap(

  { provider:  { scrollwheel: false, zoom: 14,  styles: [
    {
        "featureType": "all",
        "elementType": "geometry",
        "stylers": [
            {
                "color": "#2db0e9"
            },
            {
                "lightness": "64"
            }
        ]
    },
    {
        "featureType": "all",
        "elementType": "labels.text.fill",
        "stylers": [
            {
                "gamma": 0.01
            },
            {
                "lightness": 20
            },
            {
                "color": "#00548f"
            }
        ]
    },
    {
        "featureType": "all",
        "elementType": "labels.text.stroke",
        "stylers": [
            {
                "saturation": -31
            },
            {
                "lightness": -33
            },
            {
                "weight": 2
            },
            {
                "gamma": 0.8
            },
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "all",
        "elementType": "labels.icon",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "landscape",
        "elementType": "geometry",
        "stylers": [
            {
                "lightness": 30
            },
            {
                "saturation": 30
            }
        ]
    },
    {
        "featureType": "poi",
        "elementType": "geometry",
        "stylers": [
            {
                "saturation": 20
            }
        ]
    },
    {
        "featureType": "poi.park",
        "elementType": "geometry",
        "stylers": [
            {
                "lightness": 20
            },
            {
                "saturation": -20
            }
        ]
    },
    {
        "featureType": "road",
        "elementType": "geometry",
        "stylers": [
            {
                "lightness": "71"
            },
            {
                "saturation": -30
            }
        ]
    },
    {
        "featureType": "road",
        "elementType": "geometry.stroke",
        "stylers": [
            {
                "saturation": 25
            },
            {
                "lightness": 25
            }
        ]
    },
    {
        "featureType": "water",
        "elementType": "all",
        "stylers": [
            {
                "lightness": -20
            }
        ]
    }
]},
  internal: {id: 'multi_markers'}}, function(){
  markers = handler.addMarkers(<%=raw @hash.to_json %>);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();

});



</script>


<div class="row">

<div class="container">
<% @locations.each do |p| %>
<div class="location-content--index col-md-6">
<h2><%= link_to p.title, location_path(p) %> </h2>

<p class="location-content--index--scouted-by"> Scouted by <%= link_to p.user.name, user_path(p.user) %></p>
<div class="location-content--index--img ">
  <%= image_tag p.user.avatar.url , class: "image-avatar  "%>
  <% if p.user.following?(p) %>
  <p><%= p.followers_count %> </p>
  <% end %>
</div>
<%= image_tag p.image.url(:large) %>
<p> <%=   p.body %></p>

<p>Posted <%= time_ago_in_words(p.created_at) %> ago</p>

<div class="tag-list">
  <%= raw p.tag_list.map { |t| link_to t , tag_path(t) }.join(' ') %>
</div>

<%= link_to like_location_path(p), class: "like-btn", method: :put, remote: :true do  %>

  <button type="button" class="button button-info" aria-label="Left Align" name="button">
    <span class="glyphicon glyphicon glyphicon-heart " aria-hidden="true"></span>
    <span class="badge"><%= p.get_upvotes.size %> likes</span>
  </button>
  <% end %>

  

  <!-- <%= link_to dislike_location_path(p), class: "like", method: :put do %>
    <button type="button" class="btn btn-info" aria-label="Left Align" name="button">
      <span class="glyphicon glyphicon-thumbs-down glyphicon-align-center" aria-hidden="true"></span>
      <span class="badge"><%= p.get_downvotes.size %></span>
    </button>
    <% end %> -->
</div>

<% end %>
<%= will_paginate @locations, :page_links => false %>
